<div class="todo-app">
<div id="adicionarTask">
  <label *ngFor="let propriedade of propriedades; index as indice">
    
    <button *ngIf="!valoresEscolhidosTarefa[indice]" 
            (click)="adicionarInput(indice)">
      +
    </button>

    <input *ngIf="valoresEscolhidosTarefa[indice] 
            && propriedade.array==[]" 
    [type]="propriedade.tipoDeDado"
    placeholder="propriedade.nomePropriedade"
    [(ngModel)]="valoresTarefa[indice]">

    <select *ngIf="valoresEscolhidosTarefa[indice]
                  && propriedade.array!=[]"  

            style="background-color: #b6dcfe;"  
            id="categ" 
            [(ngModel)]="valoresTarefa[indice]">
        <option *ngFor="let categoria of propriedade.array;index as indice">
          {{categoria.categoria}}
        </option>
    </select>
  </label>
  <button 
  (click)="cadastrarTarefa()">
    Adicionar tarefa
  </button>

</div>

<div>
  <select [(ngModel)]="propriedadeAMostrar">
    <option [ngValue]="propriedade" *ngFor="let propriedade of propriedades;index as indice">
      <div *ngIf="propriedade.array!=[]">{{propriedade.nomePropriedade}}</div>
    </option>
  </select>
</div>

<div class="tarefa">

  <div 
  *ngFor="let categoria of propriedadeAMostrar.array;index as indiceCateg" 
  (dragover)="dragovrTarefa()" 
  (drop)="getCategoriaTarefa(categoria.categoria, $event)"
  id="{{categoria.categoria}}"
  class="categorias" >

    <categoria-app
      [style.backgroundColor]="categoria.corFundo"
      [tituloCategoria]="categoria.categoria"
      [indiceCategoria]="indiceCateg"
      (onRemoveCateg)="removerCategoria($event)">
    </categoria-app>
  
    <div *ngFor="let tarefa of tarefas;index as indice" 
    (dragstart)="dragTarefa(tarefa)"
    (dragover)="dragovrTarefa()" 
    (drop)="dropTarefa(indice, $event)" 
    draggable="true" 
    class="lista dropZone" >

        <tarefa-app 
        *ngIf="tarefa.arrayValorPropriedade
        [tarefa.arrayValorPropriedade.indexOf(propriedadeAMostrar)]
        ==
        categoria.categoria" 
        [propriedadesEscolhidas]="tarefa.arrayPropriedadeEscolhida"
        [valores]="tarefa.arrayValorPropriedade"
        [propriedades]="tarefa.arrayPropriedade"
        [indice]="indice"
        (onMudou)="atualizar($event)"
        (onRemove)="removerTarefa($event)"
        (onDescricao)="mudar($event)">
        </tarefa-app>
    </div>

  </div>
</div>
</div>